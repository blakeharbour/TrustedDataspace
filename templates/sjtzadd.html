<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>新增数据沙箱</title>
  <link rel="stylesheet" type="text/css" href="/static/static/h-ui/css/H-ui.min.css" />
  <link rel="stylesheet" type="text/css" href="/static/static/h-ui.admin.pro/css/h-ui.admin.pro.min.css" />
  <link rel="stylesheet" type="text/css" href="/static/lib/Hui-iconfont/1.0.8/iconfont.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<section class="Hui-admin-article-wrapper">
  <nav class="breadcrumb" style="background-color:#fff;padding: 0 24px">
    首页 <span class="c-gray en">/</span> 数据共享方法 <span class="c-gray en">/</span> 新增数据沙箱
  </nav>

  <article class="clearfix pd-20">
    <form action="" method="post" class="form form-horizontal" id="form-sandbox-add">
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>沙箱创建人：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <input type="text" class="input-text" id="creator" name="creator" placeholder="请输入沙箱创建人">
        </div>
      </div>
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>创建时间：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <input type="datetime-local" class="input-text" id="createTime" name="createTime">
        </div>
      </div>
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>数据访问路径：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <input type="text" class="input-text" id="dataPath" name="dataPath" placeholder="请输入数据访问URL或文件路径">
        </div>
      </div>
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>所存资产项名称：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <input type="text" class="input-text" id="assetName" name="assetName" placeholder="例如：车辆总量、时刻表等">
        </div>
      </div>
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3"><span class="c-red">*</span>沙箱有效期：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <input type="date" class="input-text" id="validUntil" name="validUntil">
        </div>
      </div>
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3">加密算法说明：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <input type="text" class="input-text" id="encryption" name="encryption" placeholder="如 AES256, RSA, 哈希算法等">
        </div>
      </div>
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3">访问授权范围：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <input type="text" class="input-text" id="accessRange" name="accessRange" placeholder="如 铁路局、调度所 等授权方">
        </div>
      </div>
      <div class="row clearfix">
        <label class="form-label col-xs-4 col-sm-3">沙箱销毁策略：</label>
        <div class="form-controls col-xs-8 col-sm-9">
          <textarea class="textarea" id="destroyPolicy" name="destroyPolicy" placeholder="如 超时自动销毁 / 使用后立即销毁 / 管理员审核销毁"></textarea>
        </div>
      </div>
      <div class="row clearfix">
        <div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
          <input class="btn btn-primary radius" type="button" onclick="submitSandbox()" value="&nbsp;&nbsp;提交沙箱&nbsp;&nbsp;">
        </div>
      </div>
    </form>
  </article>
</section>

<script type="text/javascript" src="/static/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/static/lib/layer/2.4/layer.js"></script>
<script>
  function submitSandbox() {
    const data = {
      creator: $('#creator').val(),
      createTime: $('#createTime').val(),
      dataPath: $('#dataPath').val(),
      assetName: $('#assetName').val(),
      validUntil: $('#validUntil').val(),
      encryption: $('#encryption').val(),
      accessRange: $('#accessRange').val(),
      destroyPolicy: $('#destroyPolicy').val()
    };
    if (!data.creator || !data.createTime || !data.dataPath || !data.assetName || !data.validUntil) {
      layer.msg("带 * 的字段为必填项", {icon: 2});
      return;
    }
    $.ajax({
      type: "post",
      url: "http://127.0.0.1:8000/create-sandbox/",
      data: JSON.stringify(data),
      contentType: "application/json",
      success: function (res) {
        if (res.status === "0") {
          layer.msg("新增数据沙箱成功", {icon: 1});
          setTimeout(() => {
            window.location.href = "/sjsx-interface/";
          }, 1500);
        } else {
          layer.alert("提交失败，请检查数据");
        }
      }
    });
  }
</script>
</body>
</html>
