<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<link rel="Bookmark" href="favicon.ico" >
	<link rel="Shortcut Icon" href="favicon.ico" />
	<!--[if lt IE 9]>
	<script type="text/javascript" src="lib/html5.js"></script>
	<script type="text/javascript" src="lib/respond.min.js"></script>
	<![endif]-->
	<link rel="stylesheet" type="text/css" href="/static/static/h-ui/css/H-ui.min.css" />
	<link rel="stylesheet" type="text/css" href="/static/static/h-ui.admin.pro/css/h-ui.admin.pro.min.css" />
	<link rel="stylesheet" type="text/css" href="/static/lib/Hui-iconfont/1.0.8/iconfont.css" />
	<link rel="stylesheet" type="text/css" href="/static/static/h-ui.admin.pro/skin/default/skin.css" id="skin" />
	<link rel="stylesheet" type="text/css" href="/static/static/business/css/style.css" />
{#	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">#}
    <!--[if IE 6]>
{#	<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>#}
	<script>DD_belatedPNG.fix('*');</script><![endif]-->
	<!--/meta 作为公共模版分离出去-->
	<title>可信数据空间</title>
	<meta name="keywords" content="h-ui.admin.pro v1.0,H-ui网站后台模版,后台模版下载,后台管理系统模版,HTML后台模版下载">
	<meta name="description" content="h-ui.admin.pro v1.0，是一款由国人开发的轻量级扁平化网站后台模板，完全免费开源的网站后台管理系统模版，适合中小型CMS后台系统。">
        <style>
    #menu-guest .Hui-menu-title,
    #menu-guest .Hui-menu-item a {
        color: #FFFFFF !important;  /* 亮白色 */
        text-shadow: 0 1px 2px rgba(0,0,0,0.2); /* 增加文字对比度 */
    }

    #menu-data-confirmation .Hui-menu-title,
    #menu-data-confirmation .Hui-menu-item a {
        color: #FFFFFF !important;  /* 亮白色 */
        text-shadow: 0 1px 2px rgba(0,0,0,0.2); /* 增加文字对比度 */
    }
    </style>
<!--	<style>-->
<!--  .loader {-->
<!--    border: 6px solid #f3f3f3;-->
<!--    border-radius: 50%;-->
<!--    border-top: 6px solid #3498db;-->
<!--    width: 40px;-->
<!--    height: 40px;-->
<!--    -webkit-animation: spin 2s linear infinite; /* Safari */-->
<!--    animation: spin 2s linear infinite;-->
<!--  }-->

<!--  /* Safari */-->
<!--  @-webkit-keyframes spin {-->
<!--    0% { -webkit-transform: rotate(0deg); }-->
<!--    100% { -webkit-transform: rotate(360deg); }-->
<!--  }-->

<!--  @keyframes spin {-->
<!--    0% { transform: rotate(0deg); }-->
<!--    100% { transform: rotate(360deg); }-->
<!--  }-->

<!--  .modal {-->
<!--    display: none;-->
<!--    position: fixed;-->
<!--    z-index: 1;-->
<!--    left: 0;-->
<!--    top: 0;-->
<!--    width: 100%;-->
<!--    height: 100%;-->
<!--    overflow: auto;-->
<!--    background-color: rgb(0,0,0);-->
<!--    background-color: rgba(0,0,0,0.4);-->
<!--    padding-top: 60px;-->
<!--  }-->

<!--  .modal-content {-->
<!--    background-color: #fefefe;-->
<!--    margin: 5% auto;-->
<!--    padding: 20px;-->
<!--    border: 1px solid #888;-->
<!--    width: 40%;-->
<!--    right: 0;-->
<!--  }-->

</style>
</head>
<body>
	<!--_menu 作为公共模版分离出去-->
	<aside class="Hui-admin-aside-wrapper">
		<div class="Hui-admin-logo-wrapper">
			<a class="logo navbar-logo" href="/aboutHui.shtml">
				<i class="va-m iconpic global-logo"></i>
					<span class="va-m">可信数据空间</span>
			</a>
		</div>
	<div class="Hui-admin-menu-dropdown bk_2">
            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="Hui-iconfont">&#xe60d;</i> 用户管理<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li ><a href="http://127.0.0.1:8000/user-list/" title="用户管理">用户管理</a></li>
					</ul>
				</dd>
			</dl>
            <dl id="menu-data-confirmation" class="Hui-menu">
              <dt class="Hui-menu-title"><i class="Hui-iconfont">&#xe616;</i> 数据确权<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
              <dd class="Hui-menu-item" style="display:block">
                <ul>
                  <li><a href="http://127.0.0.1:8000/data-confirmation/" title="数据确权">数据确权</a></li>
                </ul>
              </dd>
            </dl>
            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="Hui-iconfont">&#xe60d;</i> 数据管理<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="http://127.0.0.1:8000/data_asset_list/" title="数据列表">数据列表</a></li>
					</ul>
				</dd>

			</dl>
             <dl id="menu-guest" class="Hui-menu">
                <dt class="Hui-menu-title selected"><i class="Hui-iconfont">&#xe60d;</i> 项目信息管理<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
                <dd class="Hui-menu-item" style="display:block">
                    <ul>
                        <li><a href="http://127.0.0.1:8000/established_project/" title="已建立项目">已建立项目</a></li>
                    </ul>
                    <ul>
                        <li><a href="http://127.0.0.1:8000/pengding_project/" title="待接受项目">待接受项目</a></li>
                    </ul>
                </dd>
            </dl>
            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="Hui-iconfont">&#xe60d;</i> 存证信息管理<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="http://127.0.0.1:8000/records/" title="数据存证信息">数据存证信息</a></li>
					</ul>
				</dd>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><li class="current"><a href="http://127.0.0.1:8000/project_notarization/" title="项目存证信息">项目存证信息</a></li>
					</ul>
				</dd>
			</dl>
            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="Hui-iconfont">&#xe60d;</i>数据安全共享方法<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="http://127.0.0.1:8000/wb-interface/" title="数据接口">数据接口</a></li>
					</ul>
				</dd>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="http://127.0.0.1:8000/sjsx-interface/" title="数据沙箱">数据沙箱</a></li>
					</ul>
				</dd>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="http://127.0.0.1:8000/index/" title="隐私计算">隐私计算</a></li>
					</ul>
				</dd>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="http://127.0.0.1:8000/mutiindex/" title="密文计算">密文计算</a></li>
					</ul>
				</dd>
			</dl>
		</div>
	</aside>
	<div class="Hui-admin-aside-mask"></div>

	<div class="Hui-admin-dislpayArrow">
		<a href="javascript:void(0);" onClick="displaynavbar(this)">
			<i class="Hui-iconfont Hui-iconfont-left">&#xe6d4;</i>
			<i class="Hui-iconfont Hui-iconfont-right">&#xe6d7;</i>
		</a>
	</div>
	<section class="Hui-admin-article-wrapper">
		<!--_header 作为公共模版分离出去-->
		<header class="Hui-navbar">
			<div class="navbar">
				<div class="container-fluid clearfix">
          <nav id="Hui-topNav" class="nav navbar-nav">
            <ul class="clearfix">
{#              <li><a href="">顶部菜单</a></li>#}
              <li class="dropDown dropDown_hover">
{#                <a class="dropDown_A" href="javascript:;">顶部菜单</a>#}
                <ul class="dropDown-menu menu radius box-shadow">
                  <li class="">
                    <a href="#">二级导航</a>
                  </li>
                  <li class="">
                    <a href="#">二级导航</a>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
					<nav id="Hui-userbar" class="nav navbar-nav navbar-userbar">
						<ul class="clearfix">
{#							<li>current_user.account</li>#}
							<li class="dropDown dropDown_hover"> <a href="#" class="dropDown_A">admin <i class="Hui-iconfont">&#xe6d5;</i></a>
								<ul class="dropDown-menu menu radius box-shadow">
									<li><a href="javascript:;" onClick="myselfinfo()">个人信息</a></li>
									<li><a href="#">切换账户</a></li>
									<li><a href="#">退出</a></li>
								</ul>
							</li>
{#							<li id="Hui-msg"> <a href="#" title="消息"><span class="badge badge-danger">1</span><i class="Hui-iconfont" style="font-size:18px">&#xe68a;</i></a> </li>#}
{#							<li id="Hui-skin" class="dropDown dropDown_hover right">#}
{#								<a href="javascript:;" class="dropDown_A" title="换肤"><i class="Hui-iconfont" style="font-size:18px">&#xe62a;</i></a>#}
{#								<ul class="dropDown-menu menu radius box-shadow">#}
{#									<li><a href="javascript:;" data-val="default" title="默认（蓝色）">默认（深蓝）</a></li>#}
{#									<li><a href="javascript:;" data-val="black" title="黑色">黑色</a></li>#}
{#									<li><a href="javascript:;" data-val="green" title="绿色">绿色</a></li>#}
{#									<li><a href="javascript:;" data-val="red" title="红色">红色</a></li>#}
{#									<li><a href="javascript:;" data-val="yellow" title="黄色">黄色</a></li>#}
{#									<li><a href="javascript:;" data-val="orange" title="橙色">橙色</a></li>#}
{#								</ul>#}
{#							</li>#}
						</ul>
					</nav>
				</div>
			</div>
		</header>
		<!--/_header 作为公共模版分离出去-->
		<div class="Hui-admin-article">
			<nav class="breadcrumb" style="background-color:#fff;padding: 0 24px">
				首页
				<span class="c-gray en">/</span>
				存证信息管理
				<span class="c-gray en">/</span>
				项目存证信息
			</nav>

	<article class="Hui-admin-content clearfix">
  <div class="panel mt-20">
  <div class="user-info">
        <p>{{ current_user.com }} 的项目存证记录</p>
        <p>账号: {{ current_user.account }} | comID: {{ current_user.comid }}</p>
    </div>

    <!-- 错误提示 -->
    <div class="error-message">
        <p style="color: red;"> </p>
    </div>

					<div class="panel-body"发布>
                    <div class="clearfix">
        <!-- 新增搜索表单 -->
   <span class="f-l">
    <form id="searchForm" method="get" action="" class="form form-horizontal">
        <div class="input-group" style="width: 300px; display: flex; align-items: center;">
            <input
                type="text"
                class="input-text"
                placeholder="请输入项目名称"
                name="project_name"
                id="project_name"
                style="flex: 1; margin-right: 5px;"
            >
            <span class="input-group-btn">
                <button
                    type="button"
                    id="searchButton"
                    class="btn btn-success"
                    style="white-space: nowrap;"
                >
                    <i class="Hui-iconfont">&#xe665;</i> 搜索
                </button>
            </span>
        </div>
    </form>
</span>
{#							<span class="f-r">共有数据：<strong>3</strong> 条</span>#}
						</div>
						<div class="clearfix mt-20">
							<table class="table table-border table-bordered table-hover table-bg table-sort">
								<thead>
									<tr class="text-c">
                                   <th width="50">存证编号</th>
										<th width="80">项目名称</th>
										<th width="80">数据需求方</th>
										<th width="80">数据所有方</th>
										<th width="100">数据资产名称</th>
                                        <th width="80">申请状态</th>
                                        <th width="60">安全等级</th>
                                        <th width="100">共享方式</th>
                                            <th width="80">交易ID</th>
                                            <th width="100">交易时间</th>
                                            <th width="100">哈希摘要</th>
									</tr>
								</thead>
								<tbody id="info">
								</tbody>
							</table>
						</div>

                         <div id="myModal" class="modal">

                          <!-- 模态框内容 -->
                          <div class="modal-content">
                            <p>模型预测中，请稍候...</p>
                            <div class="loader"></div>
                          </div>

                        </div>
                        <div id="myModal1" class="modal">

                          <!-- 模态框内容 -->
                          <div class="modal-content">
                            <p>结果处理中，请稍候...</p>
                            <div class="loader"></div>
                          </div>
                        </div>
					</div>
				</div>
			</article>
		</div>
	</section>

	<!--_footer 作为公共模版分离出去-->
	<script type="text/javascript" src="/static/lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="/static/lib/layer/2.4/layer.js"></script>
	<script type="text/javascript" src="/static/static/h-ui/js/H-ui.min.js"></script>
	<script type="text/javascript" src="/static/static/h-ui.admin.pro/js/h-ui.admin.pro.min.js"></script>
	<!--/_footer /作为公共模版分离出去-->

	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript" src="/static/lib/datatables/1.10.15/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="/static/lib/laypage/1.2/laypage.js"></script>
	<script type="text/javascript" src="/static/static/business/js/main.js"></script>
	<script type="text/javascript">
        // 显示模态框
        function showModal() {
          document.getElementById('myModal').style.display = "block";
        }

        // 隐藏模态框
        function hideModal() {
          document.getElementById('myModal').style.display = "none";
        }

        function showModal1() {
          document.getElementById('myModal1').style.display = "block";
        }

        // 隐藏模态框
        function hideModal1() {
          document.getElementById('myModal1').style.display = "none";
        }
        // 模拟 statusMethod 方法
        function statusMethod(modelId) {
            // 这里可以根据实际情况返回不同的状态，例如从服务器获取数据
            // 为了演示，随机返回一个状态
            const statuses = ['发起','审核中', '完成', '已开始'];
            return statuses[Math.floor(Math.random() * statuses.length)];
        }

		$(function(){

			$.ajax({
				type:"post",
				url:"http://127.0.0.1:8000/search_notarization/",
				dataType:'json',
				success:function (res) {
					console.log("res",res);
					str=''
					if(res.status=="0"){
						var Result=res.data;
						console.log(Result);
						for(var j=0;j<Result.length;j++){
                             str+='<tr class="text-c">'+
                             '<td>'+Result[j][0]+'</td>'+
                            '<td>'+Result[j][1]+'</td>'+
                                 '<td>'+Result[j][2]+'</td>'+
                                 '<td>'+Result[j][3]+'</td>'+
                                 '<td>'+Result[j][4]+'</td>'+
                                 '<td>'+Result[j][5]+'</td>'+
                                 '<td>'+Result[j][6]+'</td>'+
                                 '<td>'+Result[j][7]+'</td>'+
                                 '<td>'+Result[j][8]+'</td>'+
                                 '<td>'+Result[j][9]+'</td>'+
                                 '<td>'+Result[j][10]+'</td>'+
                                  '</tr>'

						}
						$("#info").html(str)  // 清空原有内容再添加新数据
					}
				}
			})
		});

        $(function () {
    // 搜索按钮点击事件
    $('#searchButton').click(function () {
        var project_name = $('#project_name').val(); // 获取输入的项目名称
        searchNotarization(project_name); // 调用搜索函数
    });

    // 初始加载数据
    searchNotarization('');
});

// 搜索函数
function searchNotarization(project_name) {
    $.ajax({
        type: "GET",
        url: "http://127.0.0.1:8000/search_notarization_by_projectname/",  // 修改为新的 URL
        data: { project_name: project_name }, // 传递项目名称参数
        dataType: 'json',
        success: function (res) {
            console.log("res", res);
            var str = '';
            if (res.status == "0") {
                var Result = res.data;
                console.log(Result);
                for (var j = 0; j < Result.length; j++) {
                    str += '<tr class="text-c">' +
                        '<td>' + Result[j][0] + '</td>' +
                        '<td>' + Result[j][1] + '</td>' +
                        '<td>' + Result[j][2] + '</td>' +
                        '<td>' + Result[j][3] + '</td>' +
                        '<td>' + Result[j][4] + '</td>' +
                        '<td>' + Result[j][5] + '</td>' +
                        '<td>' + Result[j][6] + '</td>' +
                        '<td>' + Result[j][7] + '</td>' +
                      //  '<td><a href="javascript:;" onclick="sharingTypeResultShow(\'' + Result[j][7] + '\')" class="btn btn-primary radius"><i class="Hui-iconfont">&#xe600;</i> ' + Result[j][7] + '</a></td>' +
                        '<td>' + Result[j][8] + '</td>' +
                        '<td>' + Result[j][9] + '</td>' +
                        '<td>' + Result[j][10] + '</td>' +
                        '</tr>';
                }
                $("#info").html(str); // 更新表格内容
            } else {
                $("#info").html('<tr class="text-c"><td colspan="12">未找到相关项目</td></tr>');
            }
        },
        error: function (res) {
            console.log("请求失败");
        }
    });
}



        function model_test(obj, modelid) {
            console.log("id是", modelid);
            $("myButton").show();
            showModal();
            var modeldelinfo=[];
            var modeldic={
                modelid:modelid,
            };
            console.log("modeldic",modeldic);
            modeldelinfo.push(modeldic);
            console.log("modeldelinfo",modeldelinfo);
            var modeldata = JSON.stringify(modeldelinfo);

            $.ajax({
                type: 'POST',
                url: "http://127.0.0.1:8000/modeltest/",
                dataType:'json',
                data: modeldata,
                success: function (res) {
                    console.log(res);
                    if (res.status == "0") {
                    hideModal();
                    setTimeout(function (){
                        showModal1();
                        alert("样本对齐");
                        setTimeout(function (){
                            alert("模型训练结束");
                            alert("模型保存成功！");
                            hideModal1();
                            location.href = "http://127.0.0.1:8000/model-list/"
                        },3000)
                    },1000)

                    } else if (res.status == "1") {
                        alert("测试未成功！");
                    } else {
                        alert("连接失败！");
                    }
                },
            });
            {#location.href = "http://127.0.0.1:8000/model-list/";#}
        }
        function open_file(obj) {
            location.href = "http://127.0.0.1:8000/open_file_manager1/";
            location.href = "http://127.0.0.1:8000/model-list/";
		}

        function model_view(obj,pngpath,link) {
            window.location.href = link + '?pngpath=' + encodeURIComponent(pngpath);
        }

       function modeldel_list(obj,modelid) {
			location.href = "http://127.0.0.1:8000/modeldel-list/"+modelid+"/";
		}

		function member_edit(obj,userid) {
			var id=JSON.stringify(userid);
			sessionStorage.setItem("userid",id);

			location.href = "http://127.0.0.1:8000/member-edit/";
		}

		function project_notarization_add(obj,userid) {
			location.href = "http://127.0.0.1:8000/project_notarization_add/";
		}

		function model_dele(obj,id) {
			console.log("id:",id);
			var userinfo={
			    id:id
            };
			var userdata = JSON.stringify(userinfo)
            console.log(userinfo)
            console.log(userdata)
			layer.confirm('确认要删除吗？', function (index) {
				$.ajax({
					type: 'post',
					url: 'http://127.0.0.1:8000/deletemodel/',
					dataType: 'json',
					data: userdata,
					success: function (data) {
						$(obj).parents("tr").remove();
						layer.msg('已删除!', {icon: 1, time: 1000});
					},
					error: function (data) {
						console.log("1");
					},
				});
			});
		}
//打印当前用户信息到控制台（用于调试）
   console.Log("当前用户ID:",currentUser,id);
  console.Log("当前用户所属方：",currentUser.com);


	</script>
	<!--/请在上方写此页面业务相关的脚本-->
</body>
</html>
