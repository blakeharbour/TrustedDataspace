<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>数据确权记录详情</title>
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
	<meta http-equiv="Cache-Control" content="no-siteapp" />
	<link rel="Bookmark" href="favicon.ico" >
	<link rel="Shortcut Icon" href="favicon.ico" />
	<!--[if lt IE 9]>
	<script type="text/javascript" src="/static/lib/html5.js"></script>
	<script type="text/javascript" src="/static/lib/respond.min.js"></script>
	<![endif]-->
	<link rel="stylesheet" type="text/css" href="/static/static/h-ui/css/H-ui.min.css" />
	<link rel="stylesheet" type="text/css" href="/static/static/h-ui.admin.pro/css/h-ui.admin.pro.min.css" />
	<!-- 引用你的Font Awesome 4.0.3 -->
	{% load static %}
	<link rel="stylesheet" href="{% static 'css/font-awesome.css' %}">
	<link rel="stylesheet" type="text/css" href="/static/static/h-ui.admin.pro/skin/default/skin.css" id="skin" />
	<link rel="stylesheet" type="text/css" href="/static/static/business/css/style.css" />
	<!--[if IE 6]>
	<script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
	<script>DD_belatedPNG.fix('*');</script>
	<![endif]-->
	<!--/meta 作为公共模版分离出去-->

	<meta name="keywords" content="h-ui.admin.pro v1.0,H-ui网站后台模版,后台模版下载,后台管理系统模版,HTML后台模版下载">
	<meta name="description" content="h-ui.admin.pro v1.0，是一款由国人开发的轻量级扁平化网站后台模板，完全免费开源的网站后台管理系统模版，适合中小型CMS后台系统。">
</head>
<body>
 <style>
    #menu-guest .Hui-menu-title,
    #menu-guest .Hui-menu-item a {
        color: #FFFFFF !important;  /* 亮白色 */
        text-shadow: 0 1px 2px rgba(0,0,0,0.2); /* 增加文字对比度 */
    }

    #menu-data-confirmation .Hui-menu-title,
    #menu-data-confirmation .Hui-menu-item a {
        color: #FFFFFF !important;  /* 亮白色 */
        text-shadow: 0 1px 2px rgba(0,0,0,0.2); /* 增加文字对比度 */
    }
    </style>
<!-- 在<body>标签内的顶部添加 -->
{% if messages %}
<script>
    {% for message in messages %}
        alert("{{ message }}");
    {% endfor %}
</script>
{% endif %}
	<aside class="Hui-admin-aside-wrapper">
		<div class="Hui-admin-logo-wrapper">
			<a class="logo navbar-logo" href="/aboutHui.shtml">
				<i class="va-m iconpic global-logo"></i>
				<span class="va-m">可信数据空间</span>
			</a>
		</div>
		<div class="Hui-admin-menu-dropdown bk_2">
            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="fa fa-users"></i> 用户管理<i class="fa fa-chevron-down Hui-admin-menu-dropdown-arrow"></i></dt>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li ><a href="/user-list/" title="用户管理">用户管理</a></li>
					</ul>
				</dd>
			</dl>
            <dl id="menu-data-confirmation" class="Hui-menu">
              <dt class="Hui-menu-title"><i class="fa fa-shield"></i> 数据确权<i class="fa fa-chevron-down Hui-admin-menu-dropdown-arrow"></i></dt>
              <dd class="Hui-menu-item" style="display:block">
                <ul>
                  <li><a href="/data-confirmation/" title="数据确权">数据确权</a></li>
                </ul>
              </dd>
            </dl>

            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="fa fa-database"></i> 数据资产管理<i class="fa fa-chevron-down Hui-admin-menu-dropdown-arrow"></i></dt>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li class="current"><a href="/data_asset_list/" title="数据资产列表">数据资产列表</a></li>
					</ul>
				</dd>

			</dl>
             <dl id="menu-guest" class="Hui-menu">
                <dt class="Hui-menu-title selected"><i class="fa fa-sitemap"></i> 项目信息管理<i class="fa fa-chevron-down Hui-admin-menu-dropdown-arrow"></i></dt>
                <dd class="Hui-menu-item" style="display:block">
                    <ul>
                        <li><a href="/established_project/" title="已建立项目">已建立项目</a></li>
                    </ul>
                    <ul>
                        <li><a href="/pengding_project/" title="待接受项目">待接受项目</a></li>
                    </ul>
                </dd>
            </dl>
            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="fa fa-archive"></i> 区块链存证信息管理<i class="fa fa-chevron-down Hui-admin-menu-dropdown-arrow"></i></dt>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="/records/" title="数据存证信息">数据存证信息</a></li>
					</ul>
				</dd>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="/project_notarization/" title="项目存证信息">项目存证信息</a></li>
					</ul>
				</dd>
			</dl>
            <dl id="menu-guest" class="Hui-menu">
				<dt class="Hui-menu-title selected"><i class="fa fa-share"></i>数据安全共享方法<i class="fa fa-chevron-down Hui-admin-menu-dropdown-arrow"></i></dt>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="/wb-interface/" title="数据接口">数据接口</a></li>
					</ul>
				</dd>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="/sjsx-interface/" title="数据沙箱">数据沙箱</a></li>
					</ul>
				</dd>
				<dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="/guest-list/" title="隐私计算">隐私计算</a></li>
					</ul>
				</dd>
                <dd class="Hui-menu-item" style="display:block">
					<ul>
						<li><a href="/multguest-list/" title="密文计算">密文计算</a></li>
					</ul>
				</dd>
			</dl>
		</div>
	</aside>
    <div class="Hui-admin-aside-mask"></div>

	<div class="Hui-admin-dislpayArrow">
		<a href="javascript:void(0);" onClick="displaynavbar(this)">
			<i class="fa fa-chevron-left Hui-iconfont-left"></i>
			<i class="fa fa-chevron-right Hui-iconfont-right"></i>
		</a>
	</div>
	<section class="Hui-admin-article-wrapper">
		<!--_header 作为公共模版分离出去-->
		<header class="Hui-navbar">
			<div class="navbar">
				<div class="container-fluid clearfix">
          <nav id="Hui-topNav" class="nav navbar-nav">
            <ul class="clearfix">
              {% comment %}<li><a href="">顶部菜单</a></li>{% endcomment %}
              <li class="dropDown dropDown_hover">
                {% comment %}<a class="dropDown_A" href="javascript:;">顶部菜单</a>{% endcomment %}
                <ul class="dropDown-menu menu radius box-shadow">
                  <li class="">
                    <a href="#">二级导航</a>
                  </li>
                  <li class="">
                    <a href="#">二级导航</a>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
					<nav id="Hui-userbar" class="nav navbar-nav navbar-userbar">
						<ul class="clearfix">
							{% comment %}<li>超级管理员</li>{% endcomment %}

</ul>
					</nav>
				</div>
			</div>
		</header>
		<!--/_header 作为公共模版分离出去-->
        <!-- 以下是数据确权记录详情页面内容 -->
			<div class="Hui-admin-article">
				<nav class="breadcrumb" style="background-color:#fff;padding: 0 24px">
                    首页
                    <span class="c-gray en">/</span>
                    数据确权
                    <span class="c-gray en">/</span>
                    <a href="{% url 'data_confirmation_list' %}">数据确权记录</a>
                    <span class="c-gray en">/</span>
                    {{ record.data_name }}
                </nav>

				<div class="pd-20">
					<!-- 页面标题和操作按钮 -->
					<div class="text-c mb-20">
						<div class="f-l">
							<h2 class="h2-title">数据确权记录详情</h2>
						</div>
						<div class="f-r">
							<a href="{% url 'data_confirmation_list' %}" class="btn btn-default">
								<i class="fa fa-arrow-left"></i> 返回列表
							</a>
							<button type="button" class="btn btn-primary ml-10" onclick="printRecord()">
								<i class="fa fa-print"></i> 打印记录
							</button>
						</div>
						<div class="cl"></div>
					</div>

					<!-- 确权基本信息区 -->
					<div class="panel panel-default mb-20">
						<div class="panel-header">
							<h4 class="panel-title">
								<i class="fa fa-shield"></i> 确权基本信息
							</h4>
						</div>
						<div class="panel-body">
							<div class="row cl">
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">确权记录编号：</label>
										<span class="info-value text-primary">{{ record.record_id }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">确权时间：</label>
										<span class="info-value">{{ record.created_at|date:"Y-m-d H:i:s" }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">确权状态：</label>
										<span class="info-value">
											{% if record.status == 'active' %}
												<span class="label label-success">生效中</span>
											{% elif record.status == 'expired' %}
												<span class="label label-warning">已过期</span>
											{% elif record.status == 'revoked' %}
												<span class="label label-danger">已撤销</span>
											{% endif %}
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- 数据基本信息区 -->
					<div class="panel panel-default mb-20">
						<div class="panel-header">
							<h4 class="panel-title">
								<i class="fa fa-database"></i> 数据基本信息
							</h4>
						</div>
						<div class="panel-body">
							<div class="row cl">
								<div class="col-xs-12 col-sm-6 col-md-3">
									<div class="info-item">
										<label class="info-label">数据名称：</label>
										<span class="info-value">{{ record.data_name }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-3">
									<div class="info-item">
										<label class="info-label">数据持有方：</label>
										<span class="info-value">{{ record.get_data_holder_display }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-3">
									<div class="info-item">
										<label class="info-label">权利获得方：</label>
										<span class="info-value">{{ record.get_right_recipient_display }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-3">
									<div class="info-item">
										<label class="info-label">数据业务环节：</label>
										<span class="info-value">{{ record.get_business_stage_display }}</span>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- 已获得权利区 - Font Awesome 4版本适配 -->
					<div class="panel panel-default mb-20">
						<div class="panel-header">
							<h4 class="panel-title">
								<i class="fa fa-check-circle"></i> 已获得权利
							</h4>
						</div>
						<div class="panel-body">
							<div class="row cl mb-15">
								<div class="col-xs-12">
									<div class="rights-grid">
										<div class="right-item {% if record.granted_resource_holding_right %}active{% endif %}">
											{% if record.granted_resource_holding_right %}
												<i class="fa fa-check-circle"></i>
											{% else %}
												<i class="fa fa-times-circle"></i>
											{% endif %}
											<span class="right-name">资源持有权</span>
											<div class="right-desc">同样持有该数据的副本，拥有最高权限</div>
										</div>
										<div class="right-item {% if record.granted_processing_use_right %}active{% endif %}">
											{% if record.granted_processing_use_right %}
												<i class="fa fa-check-circle"></i>
											{% else %}
												<i class="fa fa-times-circle"></i>
											{% endif %}
											<span class="right-name">加工使用权</span>
											<div class="right-desc">可以基于该数据进行分析、处理或融合</div>
										</div>
										<div class="right-item {% if record.granted_reauthorization_right %}active{% endif %}">
											{% if record.granted_reauthorization_right %}
												<i class="fa fa-check-circle"></i>
											{% else %}
												<i class="fa fa-times-circle"></i>
											{% endif %}
											<span class="right-name">转授权权</span>
											<div class="right-desc">有权将该数据再次授权给其他方使用</div>
										</div>
										<div class="right-item {% if record.granted_redistribution_right %}active{% endif %}">
											{% if record.granted_redistribution_right %}
												<i class="fa fa-check-circle"></i>
											{% else %}
												<i class="fa fa-times-circle"></i>
											{% endif %}
											<span class="right-name">再分发权</span>
											<div class="right-desc">允许将加工或原始数据发布到第三方系统</div>
										</div>
										<div class="right-item {% if record.granted_view_right %}active{% endif %}">
											{% if record.granted_view_right %}
												<i class="fa fa-check-circle"></i>
											{% else %}
												<i class="fa fa-times-circle"></i>
											{% endif %}
											<span class="right-name">查看权</span>
											<div class="right-desc">仅能阅览数据内容</div>
										</div>
									</div>
								</div>
							</div>
							<div class="row cl">
								<div class="col-xs-12 col-sm-6">
									<div class="info-item">
										<label class="info-label">使用期限：</label>
										<span class="info-value">{{ record.get_usage_period_display }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6">
									<div class="info-item">
										<label class="info-label">数据安全承诺：</label>
										<span class="info-value">
											<i class="fa fa-check-circle text-success"></i> 已确认遵守数据安全规定
										</span>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- 原始申请信息区 -->
					<div class="panel panel-default mb-20">
						<div class="panel-header">
							<h4 class="panel-title">
								<i class="fa fa-file-text-o"></i> 原始申请信息
							</h4>
						</div>
						<div class="panel-body">
							<div class="row cl mb-15">
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">申请编号：</label>
										<span class="info-value">{{ record.original_application.application_id }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">申请时间：</label>
										<span class="info-value">{{ record.original_application.created_at|date:"Y-m-d H:i:s" }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">申请联系人：</label>
										<span class="info-value">{{ record.original_application.contact_person }}</span>
									</div>
								</div>
							</div>
							<div class="row cl mb-15">
								<div class="col-xs-12 col-sm-6">
									<div class="info-item">
										<label class="info-label">联系电话：</label>
										<span class="info-value">{{ record.original_application.contact_phone }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6">
									<div class="info-item">
										<label class="info-label">联系邮箱：</label>
										<span class="info-value">{{ record.original_application.contact_email }}</span>
									</div>
								</div>
							</div>
							<div class="row cl mb-15">
								<div class="col-xs-12">
									<div class="info-item">
										<label class="info-label">申请理由：</label>
										<div class="info-textarea">{{ record.original_application.application_reason }}</div>
									</div>
								</div>
							</div>
							<div class="row cl">
								<div class="col-xs-12">
									<div class="info-item">
										<label class="info-label">预期用途说明：</label>
										<div class="info-textarea">{{ record.original_application.intended_use }}</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- 审核信息区 -->
					<div class="panel panel-default mb-20">
						<div class="panel-header">
							<h4 class="panel-title">
								<i class="fa fa-clipboard"></i> 审核信息
							</h4>
						</div>
						<div class="panel-body">
							<div class="row cl mb-15">
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">审核人：</label>
										<span class="info-value">{{ record.approver }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">审核时间：</label>
										<span class="info-value">{{ record.approval_time|date:"Y-m-d H:i:s" }}</span>
									</div>
								</div>
								<div class="col-xs-12 col-sm-6 col-md-4">
									<div class="info-item">
										<label class="info-label">审核结果：</label>
										<span class="info-value">
											<span class="label label-success">同意申请</span>
										</span>
									</div>
								</div>
							</div>
							<div class="row cl">
								<div class="col-xs-12">
									<div class="info-item">
										<label class="info-label">审核意见：</label>
										<div class="info-textarea">{{ record.approval_comments }}</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- 操作记录区 -->
					{% if application_history %}
					<div class="panel panel-default mb-20">
						<div class="panel-header">
							<h4 class="panel-title">
								<i class="fa fa-clock-o"></i> 操作记录
							</h4>
						</div>
						<div class="panel-body">
							<div class="timeline">
								<div class="timeline-item">
									<div class="timeline-marker success"></div>
									<div class="timeline-content">
										<div class="timeline-header">
											<span class="timeline-title">确权生效</span>
											<span class="timeline-time">{{ record.created_at|date:"Y-m-d H:i:s" }}</span>
										</div>
										<div class="timeline-body">系统自动生成确权记录</div>
									</div>
								</div>
								{% for history in application_history %}
								<div class="timeline-item">
									<div class="timeline-marker {% if history.action_type == 'approve' %}success{% elif history.action_type == 'reject' %}danger{% else %}default{% endif %}"></div>
									<div class="timeline-content">
										<div class="timeline-header">
											<span class="timeline-title">
												{% if history.action_type == 'approve' %}审核通过
												{% elif history.action_type == 'reject' %}审核拒绝
												{% elif history.action_type == 'submit' %}提交申请
												{% else %}{{ history.action_type }}
												{% endif %}
											</span>
											<span class="timeline-time">{{ history.action_time|date:"Y-m-d H:i:s" }}</span>
										</div>
										<div class="timeline-body">
											<div class="timeline-user">操作人：{{ history.action_user }}</div>
											{% if history.action_comments %}
											<div class="timeline-comments">{{ history.action_comments }}</div>
											{% endif %}
										</div>
									</div>
								</div>
								{% endfor %}
							</div>
						</div>
					</div>
					{% endif %}
				</div>
			</div>
	</section>

	<!-- JavaScript 和 CSS 样式 -->
	<style>
		.h2-title {
			color: #333;
			font-weight: 500;
			margin: 0;
		}

		.panel {
			border: 1px solid #e5e5e5;
			border-radius: 4px;
			box-shadow: 0 1px 1px rgba(0,0,0,.05);
		}

		.panel-header {
			padding: 10px 15px;
			border-bottom: 1px solid #e5e5e5;
			background-color: #f5f5f5;
		}

		.panel-title {
			margin: 0;
			font-size: 16px;
			color: #333;
		}

		.panel-body {
			padding: 15px;
		}

		.info-item {
			margin-bottom: 10px;
		}

		.info-label {
			font-weight: 500;
			color: #666;
			margin-right: 10px;
		}

		.info-value {
			color: #333;
		}

		.info-textarea {
			background-color: #f9f9f9;
			border: 1px solid #e5e5e5;
			border-radius: 3px;
			padding: 10px;
			margin-top: 5px;
			line-height: 1.6;
			color: #333;
		}

		.rights-grid {
			display: flex;
			flex-wrap: wrap;
			gap: 15px;
		}

		.right-item {
			flex: 1;
			min-width: 200px;
			padding: 15px;
			border: 1px solid #e5e5e5;
			border-radius: 4px;
			text-align: center;
			background-color: #f9f9f9;
		}

		.right-item.active {
			border-color: #5cb85c;
			background-color: #dff0d8;
		}

		.right-item .fa {
			font-size: 24px;
			display: block;
			margin-bottom: 5px;
			color: #ccc;
		}

		.right-item.active .fa {
			color: #5cb85c;
		}

		.right-item .right-name {
			font-weight: 500;
			color: #333;
			display: block;
			margin-bottom: 5px;
		}

		.right-item .right-desc {
			font-size: 12px;
			color: #666;
			line-height: 1.4;
		}

		.label {
			padding: 4px 8px;
			font-size: 12px;
			border-radius: 3px;
		}

		.label-success {
			background-color: #5cb85c;
			color: white;
		}

		.label-warning {
			background-color: #f0ad4e;
			color: white;
		}

		.label-danger {
			background-color: #d9534f;
			color: white;
		}

		.timeline {
			position: relative;
			padding-left: 30px;
		}

		.timeline::before {
			content: '';
			position: absolute;
			left: 8px;
			top: 0;
			bottom: 0;
			width: 2px;
			background-color: #e5e5e5;
		}

		.timeline-item {
			position: relative;
			margin-bottom: 20px;
		}

		.timeline-marker {
			position: absolute;
			left: -26px;
			top: 0;
			width: 16px;
			height: 16px;
			border-radius: 50%;
			border: 2px solid #fff;
		}

		.timeline-marker.success {
			background-color: #5cb85c;
		}

		.timeline-marker.danger {
			background-color: #d9534f;
		}

		.timeline-marker.default {
			background-color: #999;
		}

		.timeline-content {
			background-color: #f9f9f9;
			border: 1px solid #e5e5e5;
			border-radius: 4px;
			padding: 15px;
		}

		.timeline-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 10px;
		}

		.timeline-title {
			font-weight: 500;
			color: #333;
		}

		.timeline-time {
			font-size: 12px;
			color: #999;
		}

		.timeline-user {
			font-size: 12px;
			color: #666;
			margin-bottom: 5px;
		}

		.timeline-comments {
			color: #333;
			line-height: 1.6;
		}

		@media (max-width: 768px) {
			.rights-grid {
				flex-direction: column;
			}

			.right-item {
				min-width: auto;
			}
		}
	</style>

	<script type="text/javascript" src="/static/lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="/static/static/h-ui/js/H-ui.js"></script>
	<script type="text/javascript" src="/static/static/h-ui.admin.pro/js/h-ui.admin.pro.min.js"></script>

	<script type="text/javascript">
		// 打印记录
		function printRecord() {
			window.print();
		}

		// 页面加载完成后的初始化
		$(document).ready(function(){
			// 初始化下拉选择框
			if(typeof $.Huifold != 'undefined') {
				$.Huifold();
			}

			// 高亮当前菜单项 - 数据确权页面
            $('#menu-data-confirmation').addClass('selected');
            $('#menu-data-confirmation .Hui-menu-item a[href*="data-confirmation"]').parent().addClass('current');

            // 确保其他菜单项不被高亮
            $('#menu-guest').removeClass('selected');
            $('#menu-guest .Hui-menu-item li').removeClass('current');
		});

		// 导航栏显示隐藏
		function displaynavbar(obj){
			if($(".Hui-admin-aside-wrapper").hasClass("aside-hide")){
				$(".Hui-admin-aside-wrapper").removeClass("aside-hide");
				$(obj).find("i").removeClass("fa-chevron-right").addClass("fa-chevron-left");
			} else {
				$(".Hui-admin-aside-wrapper").addClass("aside-hide");
				$(obj).find("i").removeClass("fa-chevron-left").addClass("fa-chevron-right");
			}
		}
	</script>
</body>
</html>