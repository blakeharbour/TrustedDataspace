<!--_meta 作为公共模版分离出去-->
<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="renderer" content="webkit|ie-comp|ie-stand">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="Bookmark" href="favicon.ico" >
    <link rel="Shortcut Icon" href="favicon.ico" />
    <!--[if lt IE 9]>
    <script type="text/javascript" src="/static/lib/html5.js"></script>
    <script type="text/javascript" src="/static/lib/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" type="text/css" href="/static/static/h-ui/css/H-ui.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/static/h-ui.admin.pro/css/h-ui.admin.pro.min.css" />
    <link rel="stylesheet" type="text/css" href="/static/lib/Hui-iconfont/1.0.8/iconfont.css" />
    <link rel="stylesheet" type="text/css" href="/static/static/h-ui.admin.pro/skin/default/skin.css" id="skin" />
    <link rel="stylesheet" type="text/css" href="/static/static/business/css/style.css" />
    <!--[if IE 6]>
    <script type="text/javascript" src="http://lib.h-ui.net/DD_belatedPNG_0.0.8a-min.js" ></script>
    <script>DD_belatedPNG.fix('*');</script>
    <![endif]-->
    <!--/meta 作为公共模版分离出去-->

    <title>数据确权记录</title>
    <meta name="keywords" content="数据确权,数据资源权">
    <meta name="description" content="数据确权记录列表">
    <style>
        .description-cell {
            position: relative;
            cursor: help;
        }

        .description-tooltip {
            display: none;
            position: absolute;
            max-width: 400px;
            max-height: 300px;
            overflow-y: auto;
            background: white;
            border: 1px solid #ddd;
            padding: 10px;
            border-radius: 4px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.2);
            z-index: 1000;
            left: 0;
            top: 100%;
        }

        .description-cell:hover .description-tooltip {
            display: block;
        }

        .copy-btn {
            display: block;
            margin-top: 10px;
            padding: 5px 10px;
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
        }

        .search-row {
            margin-bottom: 20px;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <!--_menu 作为公共模版分离出去-->
    <aside class="Hui-admin-aside-wrapper">
        <div class="Hui-admin-logo-wrapper">
            <a class="logo navbar-logo" href="/aboutHui.shtml">
                <i class="va-m iconpic global-logo"></i>
                <span class="va-m">可信数据空间</span>
            </a>
        </div>
        <div class="Hui-admin-menu-dropdown bk_2">
            <dl id="menu-guest" class="Hui-menu">
                <dt class="Hui-menu-title"><i class="Hui-iconfont">&#xe60d;</i> 用户管理<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
                <dd class="Hui-menu-item">
                    <ul>
                        <li><a href="http://127.0.0.1:8000/user-list/" title="用户管理">用户管理</a></li>
                    </ul>
                </dd>
            </dl>
            <dl id="menu-data-confirmation" class="Hui-menu">
              <dt class="Hui-menu-title selected"><i class="Hui-iconfont">&#xe616;</i> 数据确权<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
              <dd class="Hui-menu-item" style="display:block">
                <ul>
                  <li><a href="http://127.0.0.1:8000/data-confirmation/" title="数据确权">数据确权</a></li>
                </ul>
              </dd>
            </dl>
            <dl id="menu-guest" class="Hui-menu">
                <dt class="Hui-menu-title"><i class="Hui-iconfont">&#xe60d;</i> 数据管理<i class="Hui-iconfont Hui-admin-menu-dropdown-arrow">&#xe6d5;</i></dt>
                <dd class="Hui-menu-item">
                    <ul>
                        <li><a href="http://127.0.0.1:8000/data_asset_list/" title="数据列表">数据列表</a></li>
                    </ul>
                </dd>
            </dl>
            <!-- 其他菜单项保持不变 -->
        </div>
    </aside>
    <!--/_menu 作为公共模版分离出去-->

    <div class="Hui-admin-dislpayArrow">
        <a href="javascript:void(0);" onClick="displaynavbar(this)">
            <i class="Hui-iconfont Hui-iconfont-left">&#xe6d4;</i>
            <i class="Hui-iconfont Hui-iconfont-right">&#xe6d7;</i>
        </a>
    </div>

    <section class="Hui-admin-article-wrapper">
        <!--_header 作为公共模版分离出去-->
        <header class="Hui-navbar">
            <div class="navbar">
                <div class="container-fluid clearfix">
                    <nav id="Hui-userbar" class="nav navbar-nav navbar-userbar">
                        <ul class="clearfix">
                            <li>{{ current_user.account }}</li>
                            <li id="Hui-skin" class="dropDown dropDown_hover right">
                                <a href="javascript:;" class="dropDown_A" title="换肤"><i class="Hui-iconfont" style="font-size:18px">&#xe62a;</i></a>
                                <ul class="dropDown-menu menu radius box-shadow">
                                    <li><a href="javascript:;" data-val="default" title="默认（蓝色）">默认（深蓝）</a></li>
                                    <li><a href="javascript:;" data-val="black" title="黑色">黑色</a></li>
                                    <li><a href="javascript:;" data-val="green" title="绿色">绿色</a></li>
                                    <li><a href="javascript:;" data-val="red" title="红色">红色</a></li>
                                    <li><a href="javascript:;" data-val="yellow" title="黄色">黄色</a></li>
                                    <li><a href="javascript:;" data-val="orange" title="橙色">橙色</a></li>
                                </ul>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>
        </header>
        <!--/_header 作为公共模版分离出去-->

        <div class="Hui-admin-article">
            <nav class="breadcrumb">
                <i class="Hui-iconfont">&#xe67f;</i> 首页
                <span class="c-gray en">&gt;</span> 数据确权
                <span class="c-gray en">&gt;</span> 数据确权记录列表
                <a class="btn btn-success radius r" href="javascript:location.replace(location.href);" title="刷新" >
                    <i class="Hui-iconfont">&#xe68f;</i>
                </a>
            </nav>

            <article class="Hui-admin-content clearfix">
                <div class="panel">
                    <div class="panel-body">
                        <!-- 搜索区域 -->
                        <div class="search-row text-c">
                            <span class="select-box inline" style="width:120px">
                                <select id="search-field" class="select">
                                    <option value="">全部字段</option>
                                    <option value="0">数据名称</option>
                                    <option value="1">数据描述</option>
                                    <option value="2">业务环节</option>
                                    <option value="4">数据关系类型</option>
                                    <option value="5">数据来源方</option>
                                </select>
                            </span>
                            <input type="text" class="input-text" style="width:250px" placeholder="输入搜索关键词" id="search-keyword">
                            <button type="button" class="btn btn-success radius" id="search-btn"><i class="Hui-iconfont">&#xe665;</i> 搜索</button>
                            <button type="button" class="btn btn-default radius" id="search-clear-btn">清空筛选</button>
                        </div>

                        <div class="clearfix mb-20">
                            <span class="f-l">
                                <a href="/data-confirmation-add/" class="btn btn-primary radius">
                                    <i class="Hui-iconfont">&#xe600;</i> 添加数据确权
                                </a>
                            </span>
                        </div>

                        {% if error %}
                        <div class="alert alert-danger">{{ error }}</div>
                        {% endif %}

                        <div class="mt-20">
                            <table class="table table-border table-bordered table-hover table-bg table-sort">
                                <thead>
                                    <tr class="text-c">
                                        <th width="150">数据名称</th>
                                        <th width="150">数据描述</th>
                                        <th width="80">业务环节</th>
                                        <th width="80">数据格式</th>
                                        <th width="100">数据关系类型</th>
                                        <th width="80">数据来源方</th>
                                        <th width="80">原始数据提供方</th>
                                        <th width="80">加工程度</th>
                                        <th width="60">资源持有权</th>
                                        <th width="60">加工使用权</th>
                                        <th width="120">权限依据</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for record in records %}
                                    <tr class="text-c">
                                        <td>{{ record.data_name }}</td>
                                        <td class="description-cell">
                                            {{ record.data_description|truncatechars:50 }}
                                            <div class="description-tooltip">
                                                {{ record.data_description }}
                                                <button class="copy-btn">复制文本</button>
                                            </div>
                                        </td>
                                        <td>{{ record.business_stage }}</td>
                                        <td>{{ record.data_format }}</td>
                                        <td>{{ record.relationship_type }}</td>
                                        <td>{{ record.data_source }}</td>
                                        <td>{{ record.original_provider|default:"-" }}</td>
                                        <td>{{ record.processing_level|default:"-" }}</td>
                                        <td>
                                            {% if record.resource_holding_right %}
                                            <span class="label label-success radius">有</span>
                                            {% else %}
                                            <span class="label label-default radius">无</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            {% if record.processing_use_right %}
                                            <span class="label label-success radius">有</span>
                                            {% else %}
                                            <span class="label label-default radius">无</span>
                                            {% endif %}
                                        </td>
                                        <td>{{ record.right_source }}</td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                        <td colspan="11" class="text-c">暂无数据确权记录</td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </article>

            <footer class="footer Hui-admin-footer">
                <p>感谢jQuery、layer、laypage、Validform、UEditor、iconfont、Datatables、WebUploaded、icheck、highcharts、bootstrap-Switch<br> Copyright &copy;2015 h-ui.admin.pro v1.0 All Rights Reserved.<br> 本后台系统由<a href="http://www.h-ui.net/" target="_blank" title="H-ui前端框架">H-ui前端框架</a>提供前端技术支持</p>
            </footer>
        </div>
    </section>

<!--_footer 作为公共模版分离出去-->
<script type="text/javascript" src="/static/lib/jquery/1.9.1/jquery.min.js"></script>
<script type="text/javascript" src="/static/lib/layer/2.4/layer.js"></script>
<script type="text/javascript" src="/static/static/h-ui/js/H-ui.js"></script>
<script type="text/javascript" src="/static/static/h-ui.admin.pro/js/h-ui.admin.pro.js"></script>
<!--/_footer /作为公共模版分离出去-->

<!--请在下方写此页面业务相关的脚本-->
<script type="text/javascript" src="/static/lib/My97DatePicker/4.8/WdatePicker.js"></script>
<script type="text/javascript" src="/static/lib/datatables/1.10.15/jquery.dataTables.min.js"></script>
<script type="text/javascript">
$(function(){
    // 初始化DataTables
    var table = $('.table-sort').dataTable({
        "aaSorting": [[ 0, "desc" ]], // 默认按第一列降序排列
        "bStateSave": true, // 状态保存
        "aoColumnDefs": [
            {"orderable": false, "aTargets": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]} // 不参与排序的列
        ],
        "language": {
            "sProcessing": "处理中...",
            "sLengthMenu": "显示 _MENU_ 项结果",
            "sZeroRecords": "没有匹配结果",
            "sInfo": "显示第 _START_ 至 _END_ 项结果，共 _TOTAL_ 项",
            "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
            "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
            "sInfoPostFix": "",
            "sSearch": "搜索:",
            "sUrl": "",
            "sEmptyTable": "表中数据为空",
            "sLoadingRecords": "载入中...",
            "sInfoThousands": ",",
            "oPaginate": {
                "sFirst": "首页",
                "sPrevious": "上页",
                "sNext": "下页",
                "sLast": "末页"
            }
        }
    }).api();

    // 多条件搜索
    $('#search-btn').click(function(){
        var field = $('#search-field').val();
        var keyword = $('#search-keyword').val();

        if(field === ''){
            // 搜索所有列
            table.search(keyword).draw();
        } else {
            // 搜索特定列
            table.column(field).search(keyword).draw();
        }
    });

    // 清空搜索条件
    $('#search-clear-btn').click(function(){
        $('#search-field').val('');
        $('#search-keyword').val('');
        table.search('').columns().search('').draw();
    });

    // 按回车键搜索
    $('#search-keyword').keypress(function(e){
        if(e.which == 13){
            $('#search-btn').click();
        }
    });

    // 复制按钮功能
    $(document).on('click', '.copy-btn', function(e){
        e.stopPropagation();
        var text = $(this).parent().text().trim().replace('复制文本', '');

        // 创建临时文本区域来复制文本
        var $temp = $("<textarea>");
        $("body").append($temp);
        $temp.val(text).select();
        document.execCommand("copy");
        $temp.remove();

        // 显示复制成功提示
        $(this).text('已复制!');
        var $btn = $(this);
        setTimeout(function(){
            $btn.text('复制文本');
        }, 2000);
    });
});
</script>
</body>
</html>